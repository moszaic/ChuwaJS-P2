{"ast":null,"code":"var _jsxFileName = \"/Users/stevenfan/Documents/2022/Chuwa/project2ts/src/components/home/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./index.css\";\nimport Login from \"./login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [visible, setVisible] = useState(false);\n  const [tabState, setTabState] = useState(1);\n  const [cart, setCart] = useState(0);\n  const [cartotal, setCartotal] = useState(0);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [apiValid, setApiValid] = useState(false);\n  const [valiTime, setValiTime] = useState(false); //login check True/False api\n\n  const putStatus = async e => {\n    await fetch(\"http://localhost:3001/logged\", {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application.json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(e)\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    });\n  };\n\n  const getStatus = async () => {\n    const x = await fetch(\"http://localhost:3001/logged\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(result => {\n      return result;\n    });\n    return x;\n  };\n\n  const statuscheck = async () => {\n    let x = await getStatus();\n    setApiValid(x.status == true);\n    setLoggedIn(x.status == true);\n\n    if (x.status == true) {\n      setTabState(8);\n      setVisible(true);\n    }\n\n    return x.status;\n  };\n\n  useEffect(() => {\n    statuscheck();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"headers\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"logbutton\",\n        onClick: () => {\n          //loggedIn && setLoggedIn(false);\n          setLoggedIn(!loggedIn);\n          setVisible(!visible);\n\n          if (loggedIn) {\n            setApiValid(false);\n            putStatus({\n              status: \"false\"\n            });\n            setValiTime(false);\n          }\n\n          setTabState(1);\n        },\n        children: apiValid ? \"Logout\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"cart\",\n        children: [\"$\", cart, \"  \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"cart\",\n        children: [\"total:\", cartotal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Login, {\n      visible: visible,\n      setVisible: setVisible,\n      tabState: tabState,\n      setTabState: setTabState,\n      cart: cart,\n      setCart: setCart,\n      loggedIn: loggedIn,\n      setLoggedIn: setLoggedIn,\n      apiValid: apiValid,\n      setapiValid: setApiValid,\n      valiTime: valiTime,\n      setValiTime: setValiTime,\n      putStatus: putStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      children: \"guh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\",\n      children: \"footer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"M34mczpzjif7tFAFYNcLOuKR8mU=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","Login","Home","visible","setVisible","tabState","setTabState","cart","setCart","cartotal","setCartotal","loggedIn","setLoggedIn","apiValid","setApiValid","valiTime","setValiTime","putStatus","e","fetch","method","headers","Accept","body","JSON","stringify","then","response","ok","json","getStatus","x","res","result","statuscheck","status"],"sources":["/Users/stevenfan/Documents/2022/Chuwa/project2ts/src/components/home/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./index.css\";\nimport Login from \"./login\";\nimport Modal from \"../modalsandwicher/modal\";\nimport MyModal from \"../modalsandwicher\";\n\nfunction Home() {\n  const [visible, setVisible] = useState(false);\n  const [tabState, setTabState] = useState(1);\n  const [cart, setCart] = useState(0);\n  const [cartotal, setCartotal] = useState(0);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [apiValid, setApiValid] = useState(false);\n  const [valiTime, setValiTime] = useState(false);\n\n  //login check True/False api\n  const putStatus = async (e) => {\n    await fetch(\"http://localhost:3001/logged\", {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application.json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(e),\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n    });\n  };\n  const getStatus = async () => {\n    const x = await fetch(\"http://localhost:3001/logged\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        return result;\n      });\n    return x;\n  };\n\n  const statuscheck = async () => {\n    let x = await getStatus();\n    setApiValid(x.status == true);\n    setLoggedIn(x.status == true);\n    if (x.status == true) {\n      setTabState(8);\n      setVisible(true);\n    }\n    return x.status;\n  };\n\n  useEffect(() => {\n    statuscheck();\n  }, []);\n\n  return (\n    <div className={\"home\"}>\n      <div className={\"headers\"}>\n        <span\n          className={\"logbutton\"}\n          onClick={() => {\n            //loggedIn && setLoggedIn(false);\n            setLoggedIn(!loggedIn);\n            setVisible(!visible);\n            if (loggedIn) {\n              setApiValid(false);\n              putStatus({ status: \"false\" });\n              setValiTime(false);\n            }\n            setTabState(1);\n          }}\n        >\n          {apiValid ? \"Logout\" : \"Login\"}\n        </span>\n\n        <span className={\"cart\"}>\n          ${cart}\n          {\"  \"}\n        </span>\n        <span className={\"cart\"}>total:{cartotal}</span>\n      </div>\n      <Login\n        visible={visible}\n        setVisible={setVisible}\n        tabState={tabState}\n        setTabState={setTabState}\n        cart={cart}\n        setCart={setCart}\n        loggedIn={loggedIn}\n        setLoggedIn={setLoggedIn}\n        apiValid={apiValid}\n        setapiValid={setApiValid}\n        valiTime={valiTime}\n        setValiTime={setValiTime}\n        putStatus={putStatus}\n      />\n      <p />\n      <a>guh</a>\n      <p />\n      {/*<Login\n        visible={visible}\n        setVisible={setVisible}\n        tabState={tabState}\n        setTabState={setTabState}\n        /> ?????????*/}\n      <div className={\"footer\"}>footer</div>\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}