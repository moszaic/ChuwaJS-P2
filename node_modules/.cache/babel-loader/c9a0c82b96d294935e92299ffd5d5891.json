{"ast":null,"code":"var _jsxFileName = \"/Users/stevenfan/Documents/2022/Chuwa/project2ts/src/components/home/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./index.css\";\nimport Login from \"./login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [visible, setVisible] = useState(false);\n  const [tabState, setTabState] = useState(1);\n  const [cart, setCart] = useState(0);\n  const [carTotal, setCarTotal] = useState(0);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [apiValid, setApiValid] = useState(false);\n  const [valiTime, setValiTime] = useState(false);\n  const [apidone, setApiDone] = useState(false);\n  const [gridList, setGridList] = useState({\n    /*\n    0: {\n      name: \"\",\n      desc: \"\",\n      category: \"\",\n      price: 0,\n      quantity: 0,\n      img: \"\",\n    },\n    1: {\n      name: \"obj number 1\",\n      desc: \"obj 1\",\n      category: \"obj 1\",\n      price: 987,\n      quantity: 654,\n      img: \"https://cdn.onepiecechapters.com/file/CDN-M-A-N/onepiecetcb_1056_014.png\",\n    },\n    2: {\n      name: \"obj number 2\",\n      desc: \"wow\",\n      category: \"jorts\",\n      price: 10,\n      quantity: 20,\n      img: \"https://cdn.onepiecechapters.com/file/CDN-M-A-N/onepiecetcb_1056_003.png\",\n    },*/\n    0: \"test\",\n    1: \"default gridlist values\",\n    2: \"t\",\n    3: \"\"\n  }); //login check True/False api\n\n  const putStatus = async e => {\n    await fetch(\"http://localhost:3001/logged\", {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application.json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(e)\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    });\n  };\n\n  const getStatus = async () => {\n    const x = await fetch(\"http://localhost:3001/logged\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(result => {\n      return result;\n    });\n    return x;\n  };\n\n  const statuscheck = async () => {\n    let x = await getStatus();\n    setApiValid(x.status == true);\n    setLoggedIn(x.status == true);\n\n    if (x.status == true) {\n      setTabState(8);\n      setVisible(true);\n    }\n\n    return x.status;\n  };\n\n  useEffect(() => {\n    statuscheck();\n  }, []);\n\n  const handleCarTotal = () => {\n    if (apidone == true) {\n      let q = 0; //console.log(\"asdf\" + JSON.stringify(a));\n\n      Object.keys(gridList).map((e, i) => {\n        console.log(\"qwer\" + JSON.stringify(gridList[i].cartnum));\n\n        if (gridList[i].cartnum != undefined) {\n          q += gridList[i].cartnum;\n        }\n      });\n      setCarTotal(q);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"headers\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"logbutton\",\n        onClick: () => {\n          //loggedIn && setLoggedIn(false);\n          setLoggedIn(!loggedIn);\n          setVisible(!visible);\n\n          if (loggedIn) {\n            setApiValid(false);\n            putStatus({\n              status: \"false\"\n            });\n            setValiTime(false);\n          }\n\n          setTabState(1);\n        },\n        children: apiValid ? \"Logout\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"cart\",\n        children: [\"$\", cart, \"  \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), handleCarTotal(), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"cart\",\n        children: [\"total:\", carTotal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Login, {\n      visible: visible,\n      setVisible: setVisible,\n      tabState: tabState,\n      setTabState: setTabState,\n      cart: cart,\n      setCart: setCart,\n      loggedIn: loggedIn,\n      setLoggedIn: setLoggedIn,\n      apiValid: apiValid,\n      setapiValid: setApiValid,\n      valiTime: valiTime,\n      setValiTime: setValiTime,\n      putStatus: putStatus,\n      carTotal: carTotal,\n      setCarTotal: setCarTotal,\n      setApiDone: setApiDone,\n      gridList: gridList,\n      setGridList: setGridList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      children: \"guh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\",\n      children: \"footer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"U5gMYWc4I9L9/BR9pfeXSWaS3ZY=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","Login","Home","visible","setVisible","tabState","setTabState","cart","setCart","carTotal","setCarTotal","loggedIn","setLoggedIn","apiValid","setApiValid","valiTime","setValiTime","apidone","setApiDone","gridList","setGridList","putStatus","e","fetch","method","headers","Accept","body","JSON","stringify","then","response","ok","json","getStatus","x","res","result","statuscheck","status","handleCarTotal","q","Object","keys","map","i","console","log","cartnum","undefined"],"sources":["/Users/stevenfan/Documents/2022/Chuwa/project2ts/src/components/home/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./index.css\";\nimport Login from \"./login\";\nimport Modal from \"../modalsandwicher/modal\";\nimport MyModal from \"../modalsandwicher\";\n\nfunction Home() {\n  const [visible, setVisible] = useState(false);\n  const [tabState, setTabState] = useState(1);\n  const [cart, setCart] = useState(0);\n  const [carTotal, setCarTotal] = useState(0);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [apiValid, setApiValid] = useState(false);\n  const [valiTime, setValiTime] = useState(false);\n  const [apidone, setApiDone] = useState(false);\n  const [gridList, setGridList] = useState({\n    /*\n    0: {\n      name: \"\",\n      desc: \"\",\n      category: \"\",\n      price: 0,\n      quantity: 0,\n      img: \"\",\n    },\n    1: {\n      name: \"obj number 1\",\n      desc: \"obj 1\",\n      category: \"obj 1\",\n      price: 987,\n      quantity: 654,\n      img: \"https://cdn.onepiecechapters.com/file/CDN-M-A-N/onepiecetcb_1056_014.png\",\n    },\n    2: {\n      name: \"obj number 2\",\n      desc: \"wow\",\n      category: \"jorts\",\n      price: 10,\n      quantity: 20,\n      img: \"https://cdn.onepiecechapters.com/file/CDN-M-A-N/onepiecetcb_1056_003.png\",\n    },*/ 0: \"test\",\n    1: \"default gridlist values\",\n    2: \"t\",\n    3: \"\",\n  });\n\n  //login check True/False api\n  const putStatus = async (e) => {\n    await fetch(\"http://localhost:3001/logged\", {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application.json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(e),\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n    });\n  };\n  const getStatus = async () => {\n    const x = await fetch(\"http://localhost:3001/logged\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        return result;\n      });\n    return x;\n  };\n\n  const statuscheck = async () => {\n    let x = await getStatus();\n    setApiValid(x.status == true);\n    setLoggedIn(x.status == true);\n    if (x.status == true) {\n      setTabState(8);\n      setVisible(true);\n    }\n    return x.status;\n  };\n\n  useEffect(() => {\n    statuscheck();\n  }, []);\n\n  const handleCarTotal = () => {\n    if (apidone == true) {\n      let q = 0;\n      //console.log(\"asdf\" + JSON.stringify(a));\n      Object.keys(gridList).map((e, i) => {\n        console.log(\"qwer\" + JSON.stringify(gridList[i].cartnum));\n        if (gridList[i].cartnum != undefined) {\n          q += gridList[i].cartnum;\n        }\n      });\n      setCarTotal(q);\n    }\n  };\n\n  return (\n    <div className={\"home\"}>\n      <div className={\"headers\"}>\n        <span\n          className={\"logbutton\"}\n          onClick={() => {\n            //loggedIn && setLoggedIn(false);\n            setLoggedIn(!loggedIn);\n            setVisible(!visible);\n            if (loggedIn) {\n              setApiValid(false);\n              putStatus({ status: \"false\" });\n              setValiTime(false);\n            }\n            setTabState(1);\n          }}\n        >\n          {apiValid ? \"Logout\" : \"Login\"}\n        </span>\n\n        <span className={\"cart\"}>\n          ${cart}\n          {\"  \"}\n        </span>\n        {handleCarTotal()}\n        <span className={\"cart\"}>total:{carTotal}</span>\n      </div>\n      <Login\n        visible={visible}\n        setVisible={setVisible}\n        tabState={tabState}\n        setTabState={setTabState}\n        cart={cart}\n        setCart={setCart}\n        loggedIn={loggedIn}\n        setLoggedIn={setLoggedIn}\n        apiValid={apiValid}\n        setapiValid={setApiValid}\n        valiTime={valiTime}\n        setValiTime={setValiTime}\n        putStatus={putStatus}\n        carTotal={carTotal}\n        setCarTotal={setCarTotal}\n        setApiDone={setApiDone}\n        gridList={gridList}\n        setGridList={setGridList}\n      />\n      <p />\n      <a>guh</a>\n      <p />\n      {/*<Login\n        visible={visible}\n        setVisible={setVisible}\n        tabState={tabState}\n        setTabState={setTabState}\n        /> ?????????*/}\n      <div className={\"footer\"}>footer</div>\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}